/**
 * @properties={typeid:35,uuid:"C749AEDA-258A-4872-AFA7-5AE8C4114328",variableType:-4}
 */
var vPmckRec = null;
/**
 * @properties={typeid:35,uuid:"A0F8B607-2C62-433D-9683-64296E0B7FB7",variableType:-4}
 */
var vItemRec = null;
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"F43EE49E-6856-4C62-B405-C0C6F6F3520C"}
 */
var vJobNumber = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A8B60F9C-D7A8-47AF-AAF1-5E5BD47C147E"}
 */
var vCustNumber = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"7763EB06-8EBD-4012-9866-D319A9F4EDFA"}
 */
var vShopOrder = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B22E8AAD-1956-4268-965D-1AAE400464F6"}
 */
var vLoadNumber = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"29E32252-0A17-475B-878A-F676425E125D"}
 */
var vLoadPO = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A7C7653C-317D-46C8-B25E-E542C6A69A59"}
 */
var vLoadRelease = "";
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A9132D2F-D053-4BFE-B39F-4BD88123F820",variableType:4}
 */
var vJobWeight = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"5EB9242C-1455-4632-BE0C-F38A262999A1",variableType:4}
 */
var vLoadWeight = 0;
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D3DE1E3E-F30A-44C9-87C4-43CE84DCDAC2"}
 */
var vItemWidth = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"57A84A93-A784-4B46-AAED-111EED2DBAA2"}
 */
var vItemLength = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"21A4DCB9-5757-49A0-B083-6D7F5258A455"}
 */
var vItemDescription = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"34B8BF14-761D-4DC9-9081-8615B3542108"}
 */
var vItemMaterial = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4F6ECA6C-0BC2-42E3-BE6F-1B7615DA1383"}
 */
var vWeightUnits = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"650B1186-0430-4D38-9DEE-E8C7B7A283DC"}
 */
var vLengthUnits = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"8C585CE9-867C-4D3E-BC33-CBC59752B98C"}
 */
var vCustName = "";
/**
 * @properties={typeid:35,uuid:"C5CD5B6D-8319-435E-90D5-A1E1EC3C8AE1",variableType:-4}
 */
var vSheetIds = [];
/**
 * @properties={typeid:35,uuid:"0E9E22A4-1C7D-4FDA-85A4-96297C38FD3A",variableType:-4}
 */
var vCustRec = null;
/**
 * @properties={typeid:35,uuid:"5521577A-88FF-460F-B894-667F0AD6F97C",variableType:-4}
 */
var vJobRec = null;
/**
 * @properties={typeid:35,uuid:"AA905858-D208-459F-BA13-E09A244BB615",variableType:-4}
 */
var vPcmkIds = [];
/**
 * @properties={typeid:35,uuid:"4534CAE5-6153-4585-A93A-B99CD98F640A",variableType:-4}
 */
var vIdfileIds = [];
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"CC7C320F-46CF-4A5F-B78C-8E72979B32C0"}
 */
var vStatusCode = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"C5F9A681-E18A-4BB5-A3B3-0180A862E565"}
 */
var vLocation = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"E21989EC-0C22-4D5F-B0D1-0C8BB71882F5"}
 */
var vSequenceNumber = "";
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A8B9F661-5D31-4207-A4A5-B76EF99D71FC",variableType:4}
 */
var vItemQuantity = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A76CF1D5-2C6F-4D6B-98F9-1CBC1486D9D2",variableType:4}
 */
var vSummarizePcmk = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"47EC97EC-1A8C-45AE-8782-69A9AEDE1A8A",variableType:8}
 */
var vItemWeight = 0.0;
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B83E3FC7-5869-4DD7-8C20-BBE6F1F339B7"}
 */
var vCowCode = "";
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A9765137-37E8-41BF-B4FC-2776ADB69FAD",variableType:4}
 */
var vQtyBarcode = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"AE6D5732-13B9-40D1-891A-8FE938454EDA",variableType:4}
 */
var vNumberLabels = 0;
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4B521171-2581-4930-914F-B44B86D72934"}
 */
var vItemPcmk = "";

/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"EFBFC00B-AD4D-4C97-8BFC-3EB812037558"}
 */
var vSerialNumbers = "";
/**
 * @properties={typeid:35,uuid:"8863695A-4D6E-4A4C-BE21-69ADABE3C72A",variableType:-4}
 */
var vIdfilesFs = null;
/**
 * @properties={typeid:35,uuid:"EEAC83A5-C9A4-4935-8343-1E2AF348883C",variableType:-4}
 */
var vJobSequences = [];
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B99A3AA5-535D-490C-A573-85E2CE1906C7"}
 */
var windowList = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B10AB474-E82E-47DD-AEE6-DF410D2D22F9"}
 */
var multiSelectFieldEntry = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"796FCFAE-9E1D-472A-B491-093382663E58"}
 */
var multiSelectFieldName = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B310D21E-0353-473C-99D2-94C1DDDDB74B"}
 */
var vCustNum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"6F150B51-B54A-4E23-9E1E-1B1538EB528A"}
 */
var vCustomerName = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B6F122F0-6A5D-4902-93AD-3636B1129969"}
 */
var vCustomerID = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"B76AD2E1-42DC-486C-B0AB-5F942F582806"}
 */
var vJobNum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"A72DFBAD-3E2D-4E2F-BACF-252E0FAD8145"}
 */
var vJobName = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"979948AD-F482-4859-8FC2-3E334CD18D5F"}
 */
var vJobID = "";
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"7320B37D-56BF-4AEE-B9E8-2949D56A56D7",variableType:4}
 */
var vLabIDNums = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"874F4C18-0074-4A81-835C-B0F79D13818B",variableType:4}
 */
var vLabTotPieces = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"119B9EBE-C45B-4DD9-B037-C49429C74B3B",variableType:4}
 */
var vLabTotalWt = 0;
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"A9CBD3FA-3F94-47C8-A19B-79320C21D96A",variableType:4}
 */
var vLabNumPcmks = 0;
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"F8436914-334E-42C8-8BED-977084578620"}
 */
var vSeqNum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"4176ACC7-92C9-4300-8A12-C793031F7A94"}
 */
var vSheetNum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"7CFBD1DA-B33B-4A8D-8A58-546CAB5E9CB0"}
 */
var vSONum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"DCD9BFD6-D9B1-454D-9AEB-FAB88886C7F1"}
 */
var vLoadNum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"C5764897-06C5-42ED-A25D-B503AD9D948D"}
 */
var vLotNum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"AE9FDAD5-FADE-4228-AD4E-0ED076D149C3"}
 */
var vPkgNum = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"F4B355F7-D00F-4865-9D8B-FF64B566CB62"}
 */
var vLoadAll = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"995392F6-76B9-4CC5-B979-43101FA3999F"}
 */
var vLoadRel = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"DA128724-5C77-419B-A063-929DBF4E92DB"}
 */
var vPiecemark = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"ADD4DD4B-64C9-485C-A00B-9ECA5CDC23F9"}
 */
var vPcmkRel = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"8A2E64D8-7DEE-47C8-A046-ED13D9ED4C31"}
 */
var vFabShop = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"65CF7F96-ED6A-4368-9B68-4BB724463B57"}
 */
var vJobRel = ""
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"D6D1D9DC-459F-46D0-B76E-20AC5136952B"}
 */
var vArea = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"867064CC-6F83-4D39-BF0B-E2CEC512C93F"}
 */
var vBatch = "";
/**
* @type {String}
*
* @properties={typeid:35,uuid:"44A21C28-539E-4027-998E-8641EFB05954"}
*/
var vIDNumber = "";
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"9B37AA97-925A-4739-B236-CBC602FE8BDC"}
 */
var vUnits = "";
/**
* @type {Number}
*
* @properties={typeid:35,uuid:"71B36958-6662-4FF1-93C2-B6153BC48412",variableType:4}
*/
var vIncludeMinor = 0;
/**
 * @properties={typeid:35,uuid:"369405D9-82C5-4D9C-AB31-32E47364A2DD",variableType:-4}
 */
var vJobMetric = true;
/**
 * @properties={typeid:35,uuid:"6F5566F4-1B80-42DD-B3EF-69FBA7B4739C",variableType:-4}
 */
var jobFound = false;
/**
* @type {String}
*
* @properties={typeid:35,uuid:"ECED53FD-A984-4294-9332-DDF63A940F9E"}
*/
var printingLabel = "";
/**
* @type {String}
*
* @properties={typeid:35,uuid:"E4C4E59D-EBC8-4420-82AC-82EC00C92172"}
*/
var labelPrintOrder = i18n.getI18NMessage('sts.print.order.piecemark');
/**
* @type {String}
*
* @properties={typeid:35,uuid:"3CFF75CE-30C3-4E55-88E8-E7A14EF92B76"}
*/
var versionForm = "";
/**
* @type {String}
*
* @properties={typeid:35,uuid:"333D4767-06AE-4639-8635-E066BD5F53C6"}
*/
var vDrawingNum = "";
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"384EEB4B-A0AA-4533-9516-97360238888A",variableType:4}
 */
var vPercentByQty = 0;
/**
* @properties={typeid:35,uuid:"4F667565-2EBF-4336-BB38-496C99EA5852",variableType:-4}
*/
var jobIdData = {
	job_id : null,
	sheet_nums : null,
	sheet_ids : null
};
/**
 * @properties={typeid:35,uuid:"4BB1A477-E902-46F3-8743-74B5817A541C",variableType:-4}
 */
var criteria = {};
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"C1B7BA32-C064-4C56-A072-5192412814A4"}
 */
var vFilteredCount = "";
/**
 * @type {Number}
 *
 * @properties={typeid:35,uuid:"E5FED131-BF5C-4DB7-B775-3A3DD15A05AB",variableType:4}
 */
var vMinors = 0;
/**
 * @type {String}
 *
 * @properties={typeid:35,uuid:"C6697CA6-332A-4DF6-8554-ACECAB1B107D"}
 */
var baseForm;
/**
 * @param {JSEvent} event System selection event
 * @param windowTitle Window bar title
 * @param formName Main form name for button selection
 * @param xOrigin Top form corner for displayed form
 * @param yOrigin Left form corner for displayed form
 * @param xWidth Width of displayed form
 * @param yHeight Height form bound for displayed form
 * @param multiWindow allow multiple windows to be created
 *
 * @properties={typeid:24,uuid:"AB5FA848-1D56-44C8-8B74-23EA4659F2D3"}
 * @AllowToRunInFind
 * @SuppressWarnings(wrongparameters)
 * @SuppressWarnings(unused)
 */
function onActionClickMainButton(event,windowTitle,formName,xOrigin,yOrigin,xWidth,yHeight,multiWindow){
	//application.output(windowTitle);
	var formNameNew = formName;
	var baseWinName = windowTitle.replace(' View','');// added 201608 for 'view' forms of 'edit' forms
	var extension = "_";
	var winNumber = 1;
	if (multiWindow){
		while (application.getWindow(baseWinName+extension+winNumber) != null ||
			application.getWindow(baseWinName+' View'+extension+winNumber) != null){
			winNumber++;
		}
		windowTitle = windowTitle+extension+winNumber;
		formNameNew = formNameNew+extension+winNumber;
		// make a clone/copy from it
		var newForm = createFormClone(formName,winNumber);
		
		/**for (var els in newForm.elements){
			null;
		}*/
	}
	scopes.globals.logger(true,i18n.getI18NMessage('sts.txt.window.opened',new Array(windowTitle)));
	globals.setWindowOpened(windowTitle);
	var win = application.createWindow(windowTitle, JSWindow.WINDOW);
	var xBeg = xOrigin;
	var yBeg = yOrigin;
	if (application.getApplicationType() == APPLICATION_TYPES.SMART_CLIENT){//20180326 screen too small adjust main view for scroll bars
		var screenW = application.getScreenWidth()-xOrigin;
		var screenH = application.getScreenHeight()-yOrigin;
		xWidth = (xWidth > screenW) ? screenW : xWidth;
		yHeight = (yHeight > screenH) ? screenH : yHeight;
	}
	var xEnd = xOrigin+xWidth;
	var yEnd = yOrigin+yHeight;
	win.setInitialBounds(xBeg, yBeg, xEnd, yEnd);
	win.title = windowTitle;
	databaseManager.nullColumnValidatorEnabled = false;databaseManager.setAutoSave(false);
	win.show(formNameNew);
	addWindowList(windowTitle);	
}

// This code is from Servoy magazine for the cloning of forms.
/**
 * Perform the element default action.
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"027567CC-C0C7-43F6-8F87-7A8878ED6B55"}
 */
function onActionClickCustomer(event) {
	onActionClickMainButton(event,'Customers','customers',10,10,890,556,true);
}

/**
 * @param event
 *
 * @properties={typeid:24,uuid:"B0C80879-16DA-4098-8801-18C1D7F24E96"}
 */
function onActionClickEmployee(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.employees'),'employees_pre',50,50,920,505,true);
}

/**
 * @param event
 *
 * @properties={typeid:24,uuid:"AE5DFB87-E846-4DFB-9C25-E57140EC29C3"}
 */
function onActionClickCarrier(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.carriers'),'carriers',50, 50, 620, 500,true);
}

/**
 * Perform the element default action.
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"C61C110C-151B-4C9D-B0AB-FA32D9401D16"}
 */
function onActionClickEmployeeClass(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.employee.class'),'emp_class_code',50,50,610,270,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"BFF5857C-588C-4703-B859-CF9A5A1BF8B9"}
 */
function onActionClickUOM(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.units.of.measure'),'unit_of_measure',50,50,610,330,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"9BFE2D4E-D359-4CAD-A84F-F94DC119456F"}
 */
function onActionClickCOW(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.cost.of.work'),'cost_of_work',50,50,700,600,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"23EBA98D-FA40-4997-9BC9-730473CF4B54"}
 */
function onActionClickMapping(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.import.mapping'),'mappings',50,50,860,530,false);
}

/**
 * @param event
 *
 * @properties={typeid:24,uuid:"994929DE-14ED-4426-A743-D0A7169117EA"}
 */
function onActionClickEP(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.end.conditions'),'end_conditions',50,50,610,330,false);
}

/**
 * @param event
 *
 * @properties={typeid:24,uuid:"B5B3AFA8-95D7-49CD-AB3E-256306625504"}
 */
function onActionClickSC(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.status.codes'),'status_descriptions',50,50,915,530,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"81C230BD-F337-45A5-9638-883D435E9B82"}
 */
function onActionClickViewLoads(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.view.loads'),'loads_tabs',50,50,750,595,true);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"07737279-0F0A-4070-AB7F-0641608439AF"}
 */
function onActionClickDeleteRecords(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.delete.records'),'delete_records_tabs',50,50,750,595,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"D5C82166-64DE-47A8-81FA-2D5650D833F4"}
 */
function onActionClickRecallDeletes(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.recall.records'),'recall_records_tabs',50,50,750,595,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"2741B877-A129-4000-AF67-AABDE93623BF"}
 */
function onActionClickRemoveRecords(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.remove.deleted.records'),'remove_records_tabs',50,50,750,595,false);
}

/**
 * @param event
 *
 * @properties={typeid:24,uuid:"CCC7C093-1A7B-4EC7-A8E7-1E0A2B0DC5ED"}
 */
function onActionClickPref(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.preferences'),'preferences_main',50,50,700,580,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"26F19DD0-BB10-443A-849E-43064F850D75"}
 */
function onActionClickPrinter(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.printers'),'preferences_printer',50,50,650,475,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"B8CDDC2F-291F-4E1D-A46D-C1A9BF684248"}
 * @SuppressWarnings(unused)
 */
function onActionClickKISS(event) {
	var success = history.removeForm('kiss_barcode_request');
	if (success){
		var success2 = solutionModel.removeForm('kiss_barcode_request');
	}
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.import.kiss'),'kiss_import',50,50,610,400,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"F0E82BB1-3030-4DD4-973C-75E91FBA179A"}
 */
function onActionRoutings(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.routings'),'routing_codes',50,50,630,435,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"CE4DD060-E710-49BA-9DAB-0760EE82DF4B"}
 */
function onActionJobs(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.job.information'),'jobs_tabs',50,50,960,450,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"3CD18375-D0A0-466D-A181-6D585BEE8E70"}
 */
function onActionTenantDivisions(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.license.division.management'),'tenant_divisions_m',50,50,750,350,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"62683739-AB1C-4C81-9DD8-C03DD2959842"}
 */
function onActionLogonUserManage(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.logon.user.management'),'logons_m',50,50,750,330,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"0BD62770-5A9E-45E0-85B0-3DB856E01950"}
 */
function onActionSTSLogonManage(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.logon.user.management'),'tenant_users_m',50,50,1100,420,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"AF952016-58E9-4E89-8F5F-857177470611"}
 */
function onActionViewLog(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.rf.transaction.log'),'view_log',50,50,370,315,false);
}

/**
 * @param event
 *
 * @properties={typeid:24,uuid:"5E1968E2-1C90-4ED2-B0AC-C8860E10B2A4"}
 */
function onActionUserss(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.users'),'users',50,50,700,470,false);
}
/**
 * @param event
 *
 *
 * @properties={typeid:24,uuid:"5426D223-B48C-4FF8-B12D-AAE9F4FDD1FA"}
 */
function onActionPermissions(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.application.permissions'),'app_permissions',50,50,640,500,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"8378DB0B-1F09-430A-84C3-D34DCCAD8B59"}
 */
function onActionBarcodeLabels(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.bar.code.id.labels'),'barcode_print',50,50,620,670,true);
}
/**
 * @param {String} formName
 * @param {String} extension
 * @return {JSForm}
 * 
 *
 * @properties={typeid:24,uuid:"BA71A19F-6165-4C1E-A3A6-0184BEAB240F"}
 * @AllowToRunInFind
 */
function createFormClone(formName, extension) {
	while (globals.formsToRemove.length != 0){
		removeFormClone(globals.formsToRemove.pop());
	}
	var cloneName = formName+"_"+extension;
	if (!forms[formName])
		throw new Error('Can\'t create a clone of form ' + formName + ' because that form does not exist.')
	
	if (forms[cloneName])
		throw new Error('Can\'t create a cloned form called ' + cloneName + ' because a form by that name already exists in the runtime model.')
	
	var clonedForm = solutionModel.cloneForm(cloneName, solutionModel.getForm(formName));
	if (!clonedForm.getVariable('baseForm')){clonedForm.newVariable('baseForm',JSVariable.TEXT,"");}
	if (!clonedForm.getVariable('versionForm')){clonedForm.newVariable('versionForm',JSVariable.TEXT,"");}
	if (!clonedForm.getVariable('jobIdData')){clonedForm.newVariable('jobIdData',JSVariable.TEXT,"");}
	// adjust multiWindow valuelists with version
	for (var el in forms[formName].elements){
		if (forms[formName].elements[el].getElementType().search('LIST') == -1){continue}
		var oldVlName = forms[formName].elements[el].getValueListName();
		if (oldVlName){
			var newVlName = oldVlName+"_"+extension;
			var newVl = solutionModel.getValueList(newVlName);
			if (!newVl){
				newVl = solutionModel.newValueList(newVlName,solutionModel.getValueList(oldVlName).valueListType);
			}
			clonedForm.getField(el).valuelist = newVl;
		}
	}
	//clonedForm.namedFoundSet = JSForm.SEPARATE_FOUNDSET;
	if (!globals.session.forms[cloneName]){globals.session.forms[cloneName] = []}//keep list of forms for permissions

	// Now we will do a depth-first traversal through all the tabs in all the tabpanels of the original form (formName),
	// and for each tab we will make a clone of the form in that tab, and assign it
	// to the corresponding tab of the cloned form (cloneName).
	var aTabPanels = clonedForm.getTabPanels()
	for (var i in aTabPanels) {
		var aTabs = aTabPanels[i].getTabs()
		for (var j in aTabs) {
			var tabForm = aTabs[j].containsForm
			var clonedTabForm = createFormClone(tabForm.name, extension);
			globals.session.forms[cloneName].push(tabForm.name+'_'+extension);//keep list of forms for permissions
  			aTabs[j].containsForm = clonedTabForm;
		}
	}
	// Now the cloning process is complete and we return the cloned form
	return clonedForm;
}

/**

 * @private
 * 
 * @param {String} tpName
 * @param {String} tabName
 * @return RuntimeForm
 *
 *
 * @properties={typeid:24,uuid:"E81664E2-9184-40DC-96E1-4293CFC5A91B"}
 */
function getTabForm(tpName, tabName) {
    /** @type {RuntimeTabPanel} */
    var tab = elements[tpName];
    if (!tab) {
       throw new Error('Tabpanel '+tpName+' is not an element of form '+controller.getName());
    } else {
        for(var i = 1; i <= tab.getMaxTabIndex(); i++) {  
             if (tab.getTabNameAt(i) == tabName) {
                 return forms[tab.getTabFormNameAt(i)];
             } 
        }
    }
    throw new Error('Tabpanel '+tpName+' of form '+controller.getName()+' has no tab named '+tabName);

}

/**
 * @return RuntimeForm
 *
 *
 * @properties={typeid:24,uuid:"DEDB2FF3-DB64-441B-A58C-1C3B4F84314F"}
 */
function getParentForm() {

	/** @type {JSDataSet} */
	var dataset = controller.getFormContext();
	if (dataset.getMaxRowIndex() > 1) {
		// form is in a tabpanel
		var parentFormName = dataset.getValue(dataset.getMaxRowIndex()-1, 2)
		return forms[parentFormName]
	}
	else {
		if (globals.debugtesting){
			//throw new Error ('getParentForm() called from a form that is a top-level form and therefore has no parent.')
		}
	}
	return null;
}
/**
 * @param windowName
 *
 * @properties={typeid:24,uuid:"C6231BA9-FA7B-469D-91C5-C22E34A6B477"}
 * @AllowToRunInFind
 * @SuppressWarnings(wrongparameters)
 */
function addWindowList(windowName){
	var length = globals.aTrackWindows.length;
	for (var i=0;i<length;i++){
		if (globals.aTrackWindows[i].search(windowName) == 0) {return}
	}
	globals.aTrackWindows.push(windowName);
	application.setValueListItems('stsvl_nav_windows',globals.aTrackWindows);
	if (application.getApplicationType() == APPLICATION_TYPES.WEB_CLIENT) {
		forms.sts_nav_window.updateUI();
		
	}
}
/**
 *
 * @properties={typeid:24,uuid:"29F2DCD5-FF81-47D9-B83B-8D0064EB5A43"}
 * @AllowToRunInFind
 * @SuppressWarnings(unused)
 * @SuppressWarnings(unused)
 */
function focusWindow(){
	//var winList = application.getValueListArray('stvl_nav_windows');
	var windowArray = globals.aTrackWindows;
	/** @type {String} */
	var windowName = elements.windows.getSelectedElements()[0];
	//var winNameSearch = windowName.trim();
	//var winIndex = windowArray.indexOf(windowName.trim());
	if (windowName == null){return}
	if (windowName == " "){return}
	if (windowName.search('STS') == 0){return}//cannot bring main to front, so ignore
	var windowx = application.getWindow(windowName.trim());
	//if (windowName[windowName.length-1] == " "){
	//	windowName = windowName.slice(0,windowName.length-1);
	//} else {
	//	windowName = windowName+' ';
	//}
	//windowArray[winIndex] = windowName;
	///** @type windowArray {Array} */
	//application.setValueListItems('stvl_nav_windows',windowArray);
	globals.winTrackProvider = " ";
	globals.winTrackProvider = "";
	//plugins.window.maximize(windowx.title);
	//plugins.window.maximize(windowName);
	windowx.toFront();
}
/**
 * @properties={typeid:24,uuid:"F136BFBF-4BE1-48EC-87FE-5C11DFC2727D"}
 * @AllowToRunInFind
 */
function removeWindowTrack(){
	var win = application.getActiveWindow();
	var formName = win.title;
	scopes.globals.logger(true,i18n.getI18NMessage('sts.txt.window.closed',new Array(formName)));
	//var formName = controller.getName();
	var tempArray = new Array;
	//tempArray = globals.aTrackWindows;
	var tempLength = globals.aTrackWindows.length;
	var windowName = "";
	for (var index = 0; index < tempLength; index++){
		windowName = globals.aTrackWindows[index];
		if (!windowName){continue}
		if (formName.search(windowName) != 0){
			tempArray.push(windowName);
		}
	}
	globals.aTrackWindows = tempArray;
	application.setValueListItems('stsvl_nav_windows',tempArray);
	globals.winTrackProvider = " ";
	globals.winTrackProvider = "";

}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"0905F5E5-F978-4D5C-9600-53AFA67B3D8C"}
 */
function windowRev(event){
	var win = application.getActiveWindow();
	var formSplit = win.controller.getName().split("_");
	var formRev = formSplit[formSplit.length-1];
	return formRev;
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"0C6FA445-BE8E-4005-BDD5-70B401E4E1D9"}
 */
function onActionClickViewLicense(event) {
	globals.showViewDetail = true;
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.logon.license.info'),'view_license',50,50,650,535,false);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"2145BB44-7554-439C-A782-4B3EFB19502B"}
 */
function onActionClickViewWhoAmI(event) {
	globals.showViewDetail = false;
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.who.am.i'),'view_license',50,50,650,505,false);
}
/**
 * @properties={typeid:24,uuid:"2070E1C5-8086-4302-8279-F9FAE3148F11"}
 */
function getJobMetricsMW(){
	null;
	//application.output(vJobRec);
	return scopes.jobs.getJobTotalWeight(vJobRec.job_id.toString(),vJobRec.tenant_uuid.toString(),vJobRec.metric_job,false);
}
/**
 * @param varName
 * @param newValue
 *
 * @properties={typeid:24,uuid:"B45124DA-F3D8-48D7-AE44-AC3DB0851BA7"}
 */
function scopesJobsSet(varName, newValue){
	scopes.jobs[varName] = newValue;
}
/**
 * @param varName
 *
 * @properties={typeid:24,uuid:"1183732F-2D56-4234-8DFF-5FD341FFC9D8"}
 */
function scopesJobsGet(varName){
	return scopes.jobs[varName];
}
/**
 * @param functionName
 *
 * @properties={typeid:24,uuid:"7566366C-191A-4230-BBFD-35EC25BCF7F5"}
 */
function scopesJobsExec(functionName){
	null;
	var newCom = 'scopes.jobs.'+functionName+"()";
	var returnVal = eval(newCom);
	return returnVal;
}
/**
 * @param formName
 *
 * @properties={typeid:24,uuid:"3E4015D3-73DC-4CC9-B7B6-8085C022F99D"}
 */
function removeFormClone(formName){
	//if (!formName){return}
	var tabPanels = solutionModel.getForm(formName).getTabPanels();
	for (var p in tabPanels) {
		var tabs = tabPanels[p].getTabs();
		for (var t in tabs) {
			var tabFormX = tabs[t].containsForm;
			removeFormClone(tabFormX.name);
		}
	}
	scopes.jobs.removeFormHist(formName);
}
/**
 * upon entry into field, save the field name to 
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"7A4014D5-3AF4-4850-A54C-00823F390FF0"}
 * @AllowToRunInFind
 */
function onActionElementPicks(event) {
	var eventType = event.getType();
	var formName = event.getFormName();
	var buttonName = event.getElementName();
	if (buttonName.search('btn') == 0){
		var elementName = buttonName.replace('btn','frm');
	} else {
		elementName = buttonName.replace('lbl','frm');
	}
	if (forms[formName] && forms[formName].elements['frmJobNum']){
		var jobNumDP = forms[formName][forms[formName].elements['frmJobNum'].getDataProviderID()];
		if (!jobNumDP){
			forms[formName].elements['frmJobNum'].requestFocus();
			return true;
		}
	}
	var arrayInUse = [];
	var topForm = application.getActiveWindow().controller.getName();
	var jobInfo = forms[topForm].jobIdData;
	var activeEl = setActiveElement(elementName);
	var returnInfo = null;
	switch (activeEl){
		case "Seq" :
			scopes.jobs.jobSequenceNumbers(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.sequence_nums);	
			break;
		case "Sheet":
			scopes.jobs.jobSheetAndDrawingNumbers(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.sheet_nums);
			break;
		case "Lot":
			scopes.jobs.jobLotNumbers(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.lot_nums);
			break;
		case "Draw":
			scopes.jobs.jobSheetAndDrawingNumbers(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.ref_drawings);
			break;
		case "Area":
			scopes.jobs.jobIdfileMiscInfo(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.area_names);
			break;
		case "Batch":
			scopes.jobs.jobIdfileMiscInfo(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.batch_names);
			break;
		case "SO":
			scopes.jobs.jobIdfileMiscInfo(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.shoporder_nums);
			break;
		case "PcmkRel":
			scopes.jobs.jobIdfileMiscInfo(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.pcmk_rels);
			break;
		case "FabShop":
			scopes.jobs.jobStations(topForm); //jobIdfileMiscInfo(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.stations); //active_stations;
			break;
		case "Pkg":
			scopes.jobs.jobIdfileMiscInfo(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.package_nums);
			break;
		case "LoadRel":
			scopes.jobs.jobLoadsAndReleases(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.load_rels);
			break;
		case "LoadNum":
			scopes.jobs.jobLoadsAndReleases(topForm);
			arrayInUse = arrayInUse.concat(jobInfo.load_nums);
			break;
		default:
			
	}
	if (forms[formName].elements.btn_Info){
		forms[formName].elements.btn_Info.enabled = true;
	}
	if (eventType == JSEvent.FOCUSLOST){
		var dataProv = forms[formName].elements[elementName].getDataProviderID();
		var itemList = [];
		if (!forms[formName][dataProv]){return true;}
		/** @type {String} */
		var items = forms[formName][dataProv];
		items = items.replace(/\,[ ]*/g,', ');
		itemList = items.split(", ");
		var labelNames = forms[formName].elements[elementName].getLabelForElementNames();
		// see if there is an onAction method for the label and there is an empty array
		// if there is an onAction for the label, then we are looking at a set of criteria
		// otherwise, it is a free form field, or a barcode entry, that will need to be addressed as well
		// CURRENT move this one up for focuslost, not this function because it doesn't need the f2 list
		for (var index = 0;index < itemList.length;index++){
			if (arrayInUse.indexOf(itemList[index]) == -1){
				forms[formName][dataProv] = "";
				forms[formName].elements[elementName].requestFocus();
				//errormessage
				return false;
			}
		}
		return true;
	}
	if (arrayInUse && (arrayInUse.length > 0 || (arrayInUse[0] == " " && arrayInUse.length == 1))){
		forms[formName].elements[elementName].bgcolor = 'white';
		multiSelectFieldName = elementName;
		forms[formName].elements.frmMultiSelect.visible = true;
		forms[formName].elements.frmMultiSelect.requestFocus();
		application.setValueListItems('vl_barcode_idlabel_multiselect'+forms[formName].versionForm,arrayInUse);
		//forms[formName].elements.frmMultiSelect.requestFocus();
		forms[formName].controller.focusField('frmMultiSelect',false);
		var elementVar = forms[formName].elements[multiSelectFieldName].getDataProviderID();
		multiSelectFieldEntry = forms[formName][elementVar].replace(', ','\n');
		multiSelectFieldEntry = multiSelectFieldEntry.replace(',','\n');
	} else {
		forms[formName].elements[elementName].bgcolor = '#F0F0F0';
	}
	return true;
}
/**
 * When multiSelect loses focus, save the contents in a comma-delimited format to the calling field.
 * Use a global variable, since this is a single pass entry.
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"F08E11A7-2086-46B1-AE29-5D2E7C321C3B"}
 */
function onFocusLostMultiSelect(event) {
	var formName = event.getFormName();
	var elementVar = forms[formName].elements[multiSelectFieldName].getDataProviderID();
	multiSelectFieldName = "";
	forms[formName].elements.frmMultiSelect.visible = false;
	if (multiSelectFieldEntry){
		forms[formName][elementVar] = multiSelectFieldEntry.replace(/\n/g,', ');
	}
}
/**
 * Handle focus gained event of the element.
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"DBE47440-2000-460D-A428-7CAD3C5110A6"}
 */
function onFocusGainedMultiSelect(event) {
	var formName = event.getFormName();
	var elName = event.getElementName();
	forms[formName].elements[elName].visible = true;
	/** @type Array */
	var labelName = forms[formName].elements[multiSelectFieldName].getLabelForElementNames();
	if (labelName.length >0){
		forms[formName].elements['frmMultiSelectLabel'].text = forms[formName].elements[labelName[0]].text;
	} else {
		forms[formName].elements['frmMultiSelectLabel'].text = "Choose multiple items:";
	}
}
/**
 * Check entries on focus lost
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"6CA28272-0EFD-4034-8AD0-2735B715A73A"}
 * @AllowToRunInFind
 */
function onFocusLostElement(event) {
	var elementName = event.getElementName();
	var formName = event.getFormName();
	forms[formName]['vFilteredCount'] = scopes.globals.collectCriteria2(event);
	var dataProvPcmk = "";
	if (elementName.search(/Piecemark/)){
		// check for piecemark entry

		if (forms[formName].elements['btn_Print']){
			dataProvPcmk = forms[formName].elements['frmPiecemark'].getDataProviderID();
			forms[formName].elements['btn_Print'].enabled = (forms[formName][dataProvPcmk] != "");
		}
		return true;
	} else if (elementName.search(/IdNumber/)){
		// check for full idnumber
		return true;
	} else {
		// check for element picks action or process lost element
		return onActionElementPicks(event);
	}
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"84F851D9-D505-454C-B669-A87AC0EA0996"}
 */
function onActionNull(event){
	null;
}
/**
 * Callback method for when form is shown.
 *
 * @param {Boolean} firstShow form is shown first time after load
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"CD722128-FBA7-4F86-A587-E7D8C0586733"}
 */
function onShow(firstShow, event) {
	versionForm = globals.getInstanceForm(event);
	baseForm = event.getFormName().replace(versionForm,'');
	globals.setUserFormPermissions(event);
	return _super.onShow(firstShow, event)
}

/**
 * Perform the element default action.
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"0209A2A6-4955-4A59-8AF6-E4BEE47B2B7C"}
 * @AllowToRunInFind
 */
function syncI18N(event) {
	/** @type {QBSelect<db:/stsservoy/messages>} */
	var q = databaseManager.createSelect('db:/stsservoy/messages');
	q.result.add(q.columns.message_num);
	q.result.add(q.columns.message_text);
	var resultQ = databaseManager.getFoundSet(q);
	var idx = 1;
	/** @type {JSRecord<db:/stsservoy/messages>} */
	var rec = null;
	while (rec = resultQ.getRecord(idx++)){
		/** @type {QBSelect<db:/stsservoy/i18n_table>} */
		var fs = databaseManager.createSelect('db:/stsservoy/i18n_table');
		fs.result.add(fs.columns.i18n_table_id);
		fs.where.add(fs.columns.message_key.eq(rec.message_num));
		fs.where.add(fs.columns.message_language.isNull);
		var I18 = databaseManager.getFoundSet(fs);
		if (false && I18.getSize() > 0){
			if (application.isInDeveloper()){application.output('message '+rec.message_num+' '+rec.message_text)}
			var newIdx = I18.newRecord();
			var newRec = I18.getRecord(newIdx);
			newRec.message_key = rec.message_num;
			newRec.message_value = rec.message_text;
			newRec.message_language = "en";
		}
	}
}
/**
 * @AllowToRunInFind
 * 
 * @param elementName
 *
 * @properties={typeid:24,uuid:"3287C8DD-C8F4-4A55-8579-1AF3A92314B5"}
 */
function setActiveElement(elementName){
	var activeEl = "";
	if (elementName.search("Seq") != -1){activeEl = "Seq"}
	else if (elementName.search("Sheet") != -1){activeEl = "Sheet"}
	else if (elementName.search("Lot") != -1){activeEl = "Lot"}
	else if (elementName.search("Drawing") != -1){activeEl = "Draw"}
	else if (elementName.search("Area") != -1){activeEl = "Area"}
	else if (elementName.search("Batch") != -1){activeEl = "Batch"}
	else if (elementName.search("SONum") != -1){activeEl = "SO"}
	else if (elementName.search("PcmkRel") != -1){activeEl = "PcmkRel"}
	else if (elementName.search("FabShop") != -1){activeEl = "FabShop"}
	else if (elementName.search("Pkg") != -1){activeEl = "Pkg"}
	else if (elementName.search("Load") != -1){
		if (elementName.search("Rel") != -1){
			activeEl = "LoadRel";
		} else {
			activeEl = "LoadNum"
		}
	}// deal with items that aren't using pre-selected criteria also
	return activeEl;
}

/**
 * Perform the element default action.
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"DF92C8CD-42EB-49EA-81A7-3A5AC2D4DD59"}
 */
function onActionClickDeveloper(event) {
	if (!application.isInDeveloper()){return}
	var response = "blah";
	switch (response){
		case 'Update Zips':{
			scopes.globals.loadZipCodeFile(event);
			break;
		}
		case 'Update User':{
			/** @type {JSFoundSet<db:/stsservoy/users>} */
			perms = databaseManager.getFoundSet('db:/stsservoy/users');
			perms.loadRecords();
			index = 1;
			while (index <= perms.getSize()){
				rec = perms.getRecord(index);
				if (!rec.user_uuid){
					rec.user_uuid = application.getUUID();
				}
				index++;
			}
			databaseManager.saveData(perms);
			break;
		}
		case 'Update Permissions':{
			var keys = [];
			/** @type {JSFoundSet<db:/stsservoy/keys>} */
			perms = databaseManager.getFoundSet('db:/stsservoy/keys');
			perms.loadRecords();
			index = 1;
			while (index <= perms.getSize()){
				rec = perms.getRecord(index);
				if (!rec.key_uuid){
					rec.key_uuid = application.getUUID();
				}
				index++;
				keys[rec.key_id] = rec.key_uuid;
			}
			databaseManager.saveData(perms);

			var groups = [];
			/** @type {JSFoundSet<db:/stsservoy/groups>} */
			perms = databaseManager.getFoundSet('db:/stsservoy/groups');
			perms.loadRecords();
			index = 1;
			while (index <= perms.getSize()){
				rec = perms.getRecord(index);
				if (!rec.group_uuid){
					rec.group_uuid = application.getUUID();
				}
				index++;
				groups[rec.group_id] = rec.group_uuid;
			}
			databaseManager.saveData(perms);
			
			var permissions = [];
			/** @type {JSFoundSet<db:/stsservoy/permissions>} */
			var perms = databaseManager.getFoundSet('db:/stsservoy/permissions');
			perms.loadRecords();
			var index = 1;
			while (index <= perms.getSize()){
				var rec = perms.getRecord(index);
				if (!rec.permission_uuid){
					rec.permission_uuid = application.getUUID();
				}
				permissions[rec.permission_uuid] = rec.permission_uuid;
				rec.key_uuid = keys[rec.key_id]
				index++;
			}
			databaseManager.saveData(perms);

			var groupKeys = [];
			/** @type {JSFoundSet<db:/stsservoy/group_keys>} */
			perms = databaseManager.getFoundSet('db:/stsservoy/group_keys');
			perms.loadRecords();
			index = 1;
			while (index <= perms.getSize()){
				rec = perms.getRecord(index);
				if (!rec.group_key_uuid){
					rec.group_key_uuid = application.getUUID();
				}
				groupKeys[rec.group_key_uuid] = rec.group_key_uuid;
				rec.group_uuid = groups[rec.group_id];
				rec.key_uuid = keys[rec.key_id];
				index++;
			}
			databaseManager.saveData(perms);
			
			/** @type {JSFoundSet<db:/stsservoy/user_groups>} */
			perms = databaseManager.getFoundSet('db:/stsservoy/user_groups');
			perms.loadRecords();
			index = 1;
			while (index <= perms.getSize()){
				rec = perms.getRecord(index);
				if (!rec.user_group_uuid){
					rec.user_group_uuid = application.getUUID();
				}
				rec.group_uuid = groups[rec.group_id];
				index++;
			}
			databaseManager.saveData(perms);
			break;
		}
		case "Delete Tablesxx":{
			var tablesToClear = ['addresses','carrier','cow_xref','cowcodes','customers','employee','employee_class','end_conditions',
			'heats','id_serial_numbers','idfiles','jobs','labor_codes','labor_department','last_id_serial','loads','lots',
			'piecemarks','preferences2','rf_transactions','route_detail','routings','sequences','sheets','status_description',
			'transactions','uom_types'
			]
			// 'mapping', 'users', 'groups','applications','associations','barcode_test','group_keys','i18n_table',
			// 'ref_types','messages','tenant_list','user_groups','zipcodes','valuelists'
			for (index = 0;index < tablesToClear.length;index++){
				var fs = databaseManager.getFoundSet('stsservoy',tablesToClear[index]);
				if (application.isInDeveloper() && fs.getSize() > 0){application.output('Deleting table '+tablesToClear[index])}
				fs.loadRecords();
				while (fs.getSize() != 0){
					fs.deleteAllRecords();
				}
			}
			break;
		}
		default:{
			
		}
	}
}
/**
 * @param {JSEvent} event
 *
 *
 * @properties={typeid:24,uuid:"782B1B8B-AC48-4EEA-B9E2-0E8BB278828F"}
 */
function onActionClickCarrierView(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.carriers.view'),'carriers_view',50, 50, 620, 500,true);
}
/**
 * Perform the element default action.
 *
 * @param {JSEvent} event the event that triggered the action
 *
 * @properties={typeid:24,uuid:"852B4329-115A-4894-81E9-A3D426380A8F"}
 */
function onActionClickCustomerView(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.customers.view'),'customers_view',10,10,890,556,true);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"5684AD90-4015-4018-B0FB-A2024F1728CE"}
 */
function onActionClickEmployeeView(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.employees.view'),'employees_view',50,50,920,505,true);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"CFF48241-D9CB-43D9-85B1-44E13D99CBD0"}
 */
function onActionClickPiecemark(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.piecemark'),'piecemark',50,50,650,400,true);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"8FDE0BCB-E5CF-4160-8511-7C8F9670A2D6"}
 */
function onActionClickPiecemarkView(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.piecemark.view'),'piecemark_view',50,50,700,400,true);
}
/**
 * @param event
 *
 * @properties={typeid:24,uuid:"3D55B20E-1121-48D4-94AD-46F4726D62FF"}
 */
function onActionClickI18nView(event){
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.i18n.view'),'i18n_edit',50,50,700,400,false);

}
/**
 * @param {JSEvent} event
 *
 * @properties={typeid:24,uuid:"20CD4D80-A640-49BF-AF27-B4FFEBC2D404"}
 */
function onActionClickSampleDataReset(event){
	var response = globals.DIALOGS.showQuestionDialog(i18n.getI18NMessage('sts.btn.sample.data'),i18n.getI18NMessage('sts.btn.sample.data')+'?',i18n.getI18NMessage('sts.btn.yes'),i18n.getI18NMessage('sts.btn.no'));
	if (response == i18n.getI18NMessage('sts.btn.yes')){
		scopes.jobs.resetSampleData('04030');
	}
}
/**
 * @param {JSEvent} event
 *
 * @properties={typeid:24,uuid:"4C7A819E-EBE3-47C2-A50E-E1DF4C12040B"}
 */
function onActionClickPerformanceImport(event) {
	onActionClickMainButton(event,i18n.getI18NMessage('sts.window.import.performance'),'import_performance_bom',50,50,640,530,false);
}
/**
 * @param {JSEvent} event
 *
 * @properties={typeid:24,uuid:"B86758FB-D92F-4FF7-9CCE-0D6FD4D21200"}
 */
function onActionClickInfoSheet(event){
	// jobNumbers J, Status Codes S, Id serial Numbers D, Users W, Bundle Numbers on Job Number B, 
	// jobNumbers J, Status Codes S, Id serial Numbers D, Users W, Bundle Numbers on Job Number B,
	var temp = scopes.prefs.temppath;
	var tempDir = plugins.file.convertToJSFile(temp);	
	if (!tempDir.exists()){
		if (application.isInDeveloper()){application.output('temp dir not found')}
		temp = '\\windows\\temp';
		var drives = ['c','d','e','f','g'];
		var tempAlt = drives[dIndex]+':'+temp;
		var dIndex = 0;
		for (var index = 0;index < drives.length;index++){
			var tempDir = plugins.file.convertToJSFile(tempAlt);
			tempAlt = drives[dIndex]+':'+temp;
			tempDir = plugins.file.convertToJSFile(tempAlt);
		}
	} else {
		tempAlt = temp;
	}
	var fileName = tempAlt+'\\infoSheet.txt';
	var file = plugins.file.createFile(fileName);
	if (application.isInDeveloper()){application.output('temp file '+fileName)}
	var created = file.createNewFile();
	if (false && !created){// unabled to create file
		if (application.isInDeveloper()){application.output('failed to create file '+fileName)}
		return;
	}
	var text_data = '';
	/** @type {QBSelect<db:/stsservoy/jobs>} */
	var q = databaseManager.createSelect('db:/stsservoy/jobs');
	q.result.add(q.columns.job_number);
	q.result.add(q.columns.job_id);
	q.where.add(q.columns.tenant_uuid.eq(globals.session.tenant_uuid));
	q.where.add(q.columns.delete_flag.isNull);
	q.where.add(q.columns.association_id.eq(globals.session.associationId));
	var Q = databaseManager.getDataSetByQuery(q,-1);
	var jobs = Q.getColumnAsArray(1);
	var jobIds = Q.getColumnAsArray(2);
	
	var idToJob = []
	for (idx = 0;idx < jobs.length;idx++){
		idToJob[jobIds[idx]] = jobs[idx];
	}
	
	/** @type {QBSelect<db:/stsservoy/status_description>} */
	var r = databaseManager.createSelect('db:/stsservoy/status_description');
	r.result.add(r.columns.status_code);
	r.where.add(r.columns.tenant_uuid.eq(globals.session.tenant_uuid));
	r.where.add(r.columns.delete_flag.isNull);
	r.sort.add(r.columns.status_sequence.asc);
	var R = databaseManager.getDataSetByQuery(r,-1);
	var statuses = R.getColumnAsArray(1);
	text_data += 'Jobs:\n\n';
	
	seen = [];
	var workers = globals.session.workerList.sort();
	for (var idx = 0;idx < jobs.length;idx++){
		if (seen.indexOf(jobs[idx]) != -1){continue}
		seen.push(jobs[idx]);
		text_data += '*J'+jobs[idx]+'*\n\n';
	}
	seen = [];
	text_data += 'Status Codes:\n\n';
	for (idx = 0;idx < statuses.length;idx++){
		if (seen.indexOf(statuses[idx]) != -1){continue}
		seen.push(statuses[idx]);
		text_data += '*S'+statuses[idx].trim()+'*\n\n';
	}
	seen = [];
	text_data += 'Workers:\n\n';
	for (idx = 0;idx < workers.length;idx++){
		if (seen.indexOf(workers[idx]) != -1){continue}
		seen.push(workers[idx]);
		text_data += '*W'+workers[idx].trim()+'*\n\n';
	}
	if (application.isInDeveloper()){application.output(text_data)}
	
	/** @type {QBSelect<db:/stsservoy/sheets>} */
	var s = databaseManager.createSelect('db:/stsservoy/sheets');
	s.where.add(s.columns.delete_flag.isNull);
	s.where.add(s.columns.tenant_uuid.eq(globals.session.tenant_uuid));
	s.where.add(s.columns.job_id.isin(jobIds));
	s.result.add(s.columns.job_id);
	
	application.output('jobIDS '+jobIds);
	application.output('jobNums '+jobs);
	
	/** @type {QBJoin<db:/stsservoy/piecemarks>} */
	var sp = s.joins.add('db:/stsservoy/piecemarks');
	sp.on.add(s.columns.sheet_id.eq(sp.columns.sheet_id));
	sp.root.where.add(sp.columns.delete_flag.isNull);
	/** @type {QBJoin<db:/stsservoy/idfiles>} */
	var si = sp.joins.add('db:/stsservoy/idfiles');
	si.on.add(sp.columns.piecemark_id.eq(si.columns.piecemark_id));
	si.root.where.add(si.columns.delete_flag.isNull);
	/** @type {QBJoin<db:/stsservoy/id_serial_numbers>} */
	var sd = si.joins.add('db:/stsservoy/id_serial_numbers');
	sd.on.add(si.columns.id_serial_number_id.eq(sd.columns.id_serial_number_id));
	sd.root.sort.add(sd.columns.id_serial_number.asc);
	sd.root.result.distinct = true;
	s.result.add(sd.columns.id_serial_number);
	
	var serials_txt = '';var count = jobs.length*80*2;
	var seen = []; var maxIdCount = 80; var skipJob = [];
	var SSS = databaseManager.getDataSetByQuery(s,-1);
	for (idx = 1;idx <= SSS.getMaxRowIndex();idx++){
		SSS.rowIndex = idx;
		var jobNum = idToJob[SSS.job_id];
		if (skipJob.indexOf(jobNum) != -1){continue}
		if (!seen[jobNum]){seen[jobNum] = []}
		if (seen[jobNum].length < maxIdCount){
			seen[jobNum].push(SSS.id_serial_number);
			continue;
		} else {
			skipJob.push(jobNum);
		}
		//if (count-- < 0){break}
	}
	
	
	for (idx = 0;idx < jobs.length;idx++){
		jobNum = jobs[idx];
		serials_txt += '\n\nJOB '+jobNum+'\n\n';
		if (!seen[jobNum]){continue}
		for (var idx2 = 0;idx2 < seen[jobNum].length;idx2++){
			serials_txt += '*'+seen[jobNum][idx2].trim()+'*\n\n';
			//var col = idx2*1+1*1;
			//if (col/4*1 == Math.floor(col/4)*1){serials_txt += "\n"}
		}
	}
	var fileObj = plugins.file.writeTXTFile(file,text_data+'\n'+serials_txt);
	if (!fileObj){
		if (application.isInDeveloper()){application.output('failed to write text file '+fileName)}
		return;
	}
	plugins.dialogs.showErrorDialog('1254',i18n.getI18NMessage('1254',[fileName]))
	//plugins.UserManager.executeCommand('wordpad.exe '+fileName);

}
